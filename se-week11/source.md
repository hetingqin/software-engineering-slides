# 软件工程及体系结构 · 第 11 周

## 线上运维 & 项目复盘 & 小团队实践

> 计算机相关专业本科/硕士 | 3 学时

---

## 第一讲：线上故障与日志管理

### 1. 线上故障：你和高手的差距

- 线上故障不可避免，关键是**如何快速响应和恢复**
- 高手 vs 新手的区别：
  - 有预案 vs 临时抱佛脚
  - 先恢复再排查 vs 先找原因导致服务长时间不可用
  - 事后复盘 vs 下次继续犯同样的错

### 2. 故障分级

| 等级 | 描述 | 处理时效 |
|------|------|----------|
| P0 | 核心服务不可用 | 立即处理 |
| P1 | 核心功能受损 | 1 小时内 |
| P2 | 非核心功能异常 | 4 小时内 |
| P3 | 体验问题 | 下个迭代 |

### 3. 应急响应流程

1. **发现**：监控告警 / 用户反馈
2. **评估**：确认故障等级和影响范围
3. **通报**：通知相关人员
4. **止血**：先恢复服务（回滚、降级、限流）
5. **定位**：查日志、查监控、查变更
6. **修复**：根因修复 + 验证
7. **复盘**：事后总结和改进

### 4. 日志管理

- 日志是线上排查问题的"黑匣子"
- 日志级别：DEBUG → INFO → WARN → ERROR → FATAL
- ELK 技术栈：Elasticsearch + Logstash + Kibana
- 可观测性三支柱：
  - **Metrics（指标）**：CPU、内存、请求量、响应时间
  - **Logs（日志）**：事件记录
  - **Traces（链路追踪）**：请求调用链

---

## 第二讲：项目复盘

### 1. 复盘方法论

- 复盘 ≠ 找原因追责，复盘 = **把经验变成能力**
- PDCA 循环：Plan → Do → Check → Act
- 5-Whys 分析法：连续追问"为什么"，找到根因

### 2. 复盘会议流程

1. 回顾目标：当初设定的目标是什么？
2. 评估结果：实际达成了什么？差距在哪？
3. 分析原因：哪些做得好？哪些可以改进？
4. 总结经验：形成可执行的改进措施

### 3. 经验教训文档

- What went well（做得好的）
- What didn't go well（需要改进的）
- Action items（具体改进措施 + 责任人 + 截止日期）
- 存档到团队知识库，避免重复犯错

---

## 第三讲：小团队 & 业余项目

### 1. 小团队的敏捷裁剪

- 大企业的完整 Scrum 流程对小团队太重了
- 小团队实践建议：
  - 保留站会（但可以隔天开）
  - 保留看板（用 Trello 等轻量工具）
  - 保留 Sprint 回顾（但可以简化）
  - 去掉不必要的文档
  - 一人多角色是常态

### 2. 个人项目的工程化管理

- 为什么程序员的业余项目大多都死了？
  - 没有明确目标和截止日期
  - 完美主义：总想做到完美才发布
  - 精力有限：工作后疲惫，难以持续
- 解决方案：**MVP 思维**
  - 最小可行产品：用最少功能验证核心假设
  - 先发布，再迭代
  - 设定小而明确的里程碑

### 3. MVP 案例

- Dropbox 先做了一个演示视频验证市场需求
- Twitter 最初只是一个内部工具
- 微信 1.0 只有文字聊天功能
- 关键：**不要等完美，先让它跑起来**

---

## 本周核心公式

> **线上可靠性** = 监控告警 + 应急预案 + 快速止血 + 事后复盘

> **MVP** = 最小功能集 + 快速验证 + 持续迭代

---

## 下周预告

📊 **行业案例**：失败项目分析 → VS Code 开源实践 → 大厂软件工程

✏️ **课后思考**：如果你的团队项目上线后出现 P0 故障，你的应急预案是什么？
