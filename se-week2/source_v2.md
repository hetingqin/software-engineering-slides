# 软件工程及体系结构 · 第 2 次

## 软件工程及体系结构

### **传统软件过程模型：从瀑布模型到多元选择**

> 电子信息工程专业硕士 | 3 学时
> 主讲人 | 何庭钦 | 271880026@qq.com

---

## 第一讲：现代软件工程的起源——瀑布模型

### 1. 蛮荒时代的"边写边改"（Code and Fix）

在软件发展初期（汇编语言时代），开发方式非常原始：接到任务就直接写代码，发现问题就停下来改。这种模式有一个专业术语，叫做**"边写边改"模型（Code and Fix）**。

对于功能简单、一个人就能搞定的小程序来说，这种方式还凑合能用。但一旦面对商业级的复杂项目，问题就集中爆发了——这就是所谓的"软件危机"：

- **进度不可控**：没有任何计划，项目什么时候能做完完全是个黑盒
- **无法分工协作**：多个人一起写代码时，不知道谁负责什么，代码经常被互相覆盖
- **需求理解偏差**：没有做需求分析，做出来的功能常常和客户想要的南辕北辙，大量返工
- **质量无法保障**：没有系统测试，软件一上线就 Bug 满天飞

### 2. 瀑布模型的诞生

为了解决这些问题，1970 年，Winston Royce 博士借鉴了建筑工程的思想，提出了**瀑布开发模型（Waterfall Model）**。它的核心思路很简单：把整个软件开发过程划分为若干个阶段，像瀑布一样从上往下，完成一个阶段才能进入下一个。

![瀑布模型图示](../../assets/043ec1b87258d3b414b4fa2c5572f20f.jpg)

瀑布模型将项目划分为六个阶段：

1. **问题定义与规划**：明确要做什么，评估项目是否可行，产出需求文档和可行性报告
2. **需求分析**：和客户反复沟通确认，把所有需求细化成明确的功能描述，形成需求规格说明书
3. **软件设计**：根据需求进行架构设计、数据库设计等，产出设计文档
4. **程序编码**：按照设计文档进行编码实现
5. **软件测试**：对照需求文档进行系统测试，发现并修复缺陷，产出测试报告
6. **运行维护**：软件上线投入使用，持续修复问题和增加功能

> 瀑布模型提出后迅速被广泛采用，从 1970 年代一直到 2000 年前后，它都是最主流的开发模型。也正是从瀑布模型开始，"软件生命周期"（Software Life Cycle）这个概念被正式确立。

**为什么今天还要学瀑布模型？** 因为不管采用什么开发模式，有四项活动是任何软件项目都绕不开的：**需求分析、系统设计、编码实现和测试验证**。这四项活动都起源于瀑布模型，理解瀑布模型是理解所有后续开发模型的基础。

### 3. 实战案例：一个瀑布项目是怎么跑偏的

用一个真实项目案例来看瀑布模型在实际中的运作——假设老板要求你四个月内开发一个"游戏社交网站"：

**初始计划**：需求 2 周 + 设计 4 周 + 编码 6 周 + 测试 4 周 = 16 周

- **需求阶段**（原计划 2 周 -> 实际 3 周）：产品经理和老板反复沟通确认需求，用原型工具画出了界面原型。因为修改确认的次数太多，拖了一周。
- **设计阶段**（原计划 4 周 -> 实际 5 周）：架构师做架构设计、UI 设计师做界面设计、测试经理写测试用例。进行到第 3 周时，老板突然说"要加上网页游戏对接功能"——这是一个重大需求变更，用户系统的设计必须推倒重来，最终拖到了第 5 周。
- **编码阶段**（原计划 5 周 -> 实际 6 周）：模块之间相互依赖，自己写完了还得等别人。最终第 6 周才勉强出了一个可测试的版本。
- **测试阶段**（留下 2 周 -> 实际需要 6 周）：前面每个阶段都延期了，留给测试的时间被严重压缩。Bug 太多，最终项目整体延期了 4 周。

### 4. 瀑布模型的优缺点

通过上面的案例，可以清楚地看到瀑布模型的两面性：

**优点：**
- 过程清晰有序，每个阶段都有明确的任务和交付物
- 职责分工明确：产品经理、架构师、开发工程师、测试工程师各司其职
- 重视文档和评审，编码前先设计，编码后必须测试，质量有保障

**缺点：**
- **最大的问题：无法及时响应需求变更**，越到后期变更代价越大
- 客户在中间阶段看不到成果，要等到最后才能看到实际的软件
- 前期阶段的延误会逐级挤压后面的时间，最终导致测试和交付阶段被严重压缩

![瀑布模型优缺点总结](../../assets/881b21fa452df38da1604f5a6b55d65c.jpg)

---

## 第二讲：瀑布模型的变种——解决周期太长的问题

瀑布模型的很多问题，根源都出在**周期太长**上。周期长所以难以响应需求变更，周期长所以客户很久看不到成果，周期长所以风险不好控制。如果能把周期缩短呢？

### 1. 快速原型模型：先做一个"草稿"给客户看

**要解决的问题**：客户自己都不清楚想要什么，需求一直在变。

**做法**：用原型工具（如 Axure、墨刀）快速搭出一个界面原型，虽然没有真正的后台逻辑，但客户可以点击操作，直观地感受产品的样子。通过反复修改原型来确认需求，需求明确后再正式开发。

打个比方：客户想盖房子但说不清想要什么样的——施工方先用彩钢板搭个临时房，让客户住进去体验，边住边提意见，等需求确定了再盖真正的房子。

**原型模型的两种策略：**
- **抛弃策略**：原型只用来确认需求，确认完就扔掉，正式开发时重新写代码。适合对质量和性能要求高的项目。
- **附加策略**：在原型的基础上不断改进和完善，最终演化为正式产品。适合对质量要求不高、但要求快速上线的项目。

**优点**：快速响应客户反馈，降低需求不确定带来的风险。
**代价**：快速开发往往以牺牲代码质量为代价。

### 2. 增量模型：把大系统拆成小模块，分批交付

**核心思路**：不一次性交付完整的系统，而是按功能模块拆分，先做最核心的模块上线，再逐步补充其他模块。

打个比方：盖房子不是一口气盖完，而是先盖厨房和卫生间（最刚需的部分），住进去再说，以后再盖客厅和书房。

![增量模型图示](../../assets/20d7896e4a52e8043defff6eedb9869b.jpg)

**关键要求：** 系统必须能被合理地模块化，模块之间的耦合度要足够低，否则无法独立开发和交付。这对架构师的系统拆分能力要求很高。

**适用场景**：需求比较明确、系统可以模块化、客户希望尽快看到部分功能上线。

### 3. 迭代模型：每次都交付一个"更完善的版本"

**核心思路**：不是按模块拆分，而是按时间拆分。每次迭代（通常 2-4 周）都交付一个完整但简陋的版本，随着迭代推进，版本越来越完善。

打个比方：先盖一间茅草屋（满足最基本的居住需求），再改建成小木屋（更舒适），最后盖成别墅（满足所有需求）。

![迭代模型图示](../../assets/97a05f1bba8344f5d9e8b8734a025e70.png)

**增量与迭代的核心区别：**
- **增量模型**：按功能模块横向拆分——先做完模块 A，再做模块 B
- **迭代模型**：按时间纵向演进——每次都覆盖全部功能，但每次都更完善一些

![迭代开发时间线示意](../../assets/9abe6230baeb7a92a95b65dd7c383d10.jpg)

**优点**：客户可以直观感受软件从简陋到完善的过程，及时调整期望。
**难点**：如何合理规划每次迭代的内容——多了做不完，少了工作量不饱和。

---

## 第三讲：面对不同项目，选择什么模型？

不需要死记所有模型的名字。关键是理解不同项目场景下的核心诉求，然后选择匹配的开发策略。

### 场景一：外包项目，每个阶段都需要甲方验收

**推荐模型：V 模型**

V 模型本质上还是瀑布模型，但它特别强调：每个开发阶段都有对应的测试验收。需求分析阶段对应验收测试，系统设计阶段对应系统测试，详细设计阶段对应集成测试，编码阶段对应单元测试。

![V 模型图示](../../assets/c015252d6ae984b667499ee5b8c76ab1.jpg)

适用于对质量和安全要求极高的项目，如国防、医疗、金融等领域。

### 场景二：项目风险高，客户可能随时中止合作

**推荐模型：螺旋模型**

螺旋模型在迭代的基础上，特别加入了**风险评估**环节。每完成一个迭代，都要先停下来做风险分析：项目还值得继续做吗？如果风险太大，就及时止损退出。

![螺旋模型图示](../../assets/5c1f2444754f3ce5ce68e0a790da2bcc.png)

适用于风险高、投资大、客户信任度低的项目。

### 场景三：山寨一款竞品，需求明确，希望快速上线

**推荐模型：增量模型**

需求是现成的（照着竞品抄就行），不需要花时间分析需求。按功能模块拆分，核心功能先上线抢占市场，其他模块后续补充。多个模块可以并行开发，提升效率。

### 场景四：大项目，但客户自己都不清楚想要什么

**推荐模型：统一软件开发过程（RUP）**

RUP 把整个项目拆分为四个阶段：
1. **初始阶段**：确定需求边界和主要风险
2. **细化阶段**：用原型和客户反复确认需求（借鉴原型模型）
3. **构造阶段**：需求明确后，用迭代模型逐步开发交付
4. **交付阶段**：完成测试和部署，正式上线

![RUP 模型图示](../../assets/b0091341a7fa31cd26d8a02e7d63e2fc.png)

适用于复杂度高、需求不明确、但预算充足的大型项目。

### 场景五：产品已上线，需要持续更新维护

**推荐模型：迭代模型 / 敏捷开发**

固定时间周期（如每两周一个迭代），在每个周期内选择适合的需求和 Bug 修复任务去完成，按时发布新版本。

> 敏捷开发（Agile）严格来说不是一种具体的开发模型，而是一种理念和框架。常见的实现方式包括 Scrum、极限编程（XP）、看板（Kanban）等。我们将在下一周详细讲解。

---

## 课后研讨任务

📋 **场景分析练习：为不同项目选择开发模型**

假设你同时接了三个项目，请分别选择合适的开发模型，并说明你的理由：

1. **项目 A**：帮学校实验室开发一套基因测序数据管理系统。要求极高的准确性和安全性，每个阶段都需要导师审核验收，不允许出错。
2. **项目 B**：帮同学做一个"校园二手交易"微信小程序。她说得很模糊，"就是能买能卖就行"，具体要什么功能说不清楚，但很着急上线。
3. **项目 C**：一个企业老板投资 100 万做"AI 写作助手"，但分四期拨款，每期 25 万。如果某一期看不到明显进展，就不再拨款。

**思考要点**：
- 每个项目的核心风险是什么？
- 需求的确定程度如何？
- 客户对交付节奏的期望是什么？
- 哪种模型最能应对该项目的核心挑战？
