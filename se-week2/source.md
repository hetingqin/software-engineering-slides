# 软件工程及体系结构 · 第 2 周

## 传统软件过程模型：瀑布流派与变种演阵

> 计算机相关专业本科/硕士 | 3 学时

---

## 第一讲：现代体系起源——瀑布模型

### 1. 蛮荒时代的“边写边改”（Code And Fix）法则

在软件发展初期（汇编语言时代），大家是怎么写程序的？
- **接到活 $\rightarrow$ 直接撸起袖子写代码 $\rightarrow$ 发现问题 $\rightarrow$ 停机修改。**
- 这种极其粗暴的模式，对于十几行功能单一的小代码尚可，一旦面对商业级大单，直接造成**恐怖的软件危机**：
  - 项目进度彻底黑盒，完全排不出计划。
  - 多人协作时，不知道谁该干什么，极易发生代码覆写灾难。
  - 没有任何需求分析，做出的功能经常南辕北辙，疯狂返工。
  - 无系统测试，一发布就天天宕机收客诉。

### 2. 工厂流水线降临：瀑布六阶段的诞生

为了彻底镇压大软件开发的混乱恶魔，1970年，Winston Royce 博士从**重型建筑工程**汲取灵感，祭出了影响行业50年的超级杀器——**瀑布开发模型（Waterfall Model）**。

![瀑布模型图示](../../assets/043ec1b87258d3b414b4fa2c5572f20f.jpg)

它强行把开发周期砍成一道道不可逆转的瀑布流：
- **阶段 01：问题定义与规划。**（搞定合同与可行性报告，确定能干）
- **阶段 02：需求分析。**（和客户抠字眼出PRD文档，死死咬住到底做啥功能）
- **阶段 03：软件设计。**（架构师画分层图、数据库表关联）
- **阶段 04：程序编码。**（按图纸像砌砖一样写代码）
- **阶段 05：软件测试。**（对照前面的需求案疯狂暴力黑盒白盒测试）
- **阶段 06：运行维护。**（正式上线剪彩，派几个人随时补锅）

> **无论当今最时髦的敏捷还是AI DevOps，都逃不出这其中的四大核心天道：需求、设计、编码、测试。**

### 3. 一场血淋淋的实战推演：老板逼我4个月上线的社交网

假设你接到老板死命令，4个月开发一套对标市场顶流的“游戏社交网站”。按照纯粹的瀑布流：
- **计划：** 需求2周 + 设计4周 + 编码6周 + 测试4周。
- **现实暴击：**
  - **需求期：** 因反复与老板磨合扯皮，延期到3周。
  - **设计期：** 做到第3周，老板突发奇想“我们要增加页游对接！”，架构师当场崩溃，全盘推倒重来，这一步又延宕成5周。
  - **编码期：** 由于前期设计推翻，模块间相互干预等待，开发了足足6周才出可用包。
  - **测试期：** 留给测试的时间被疯狂挤压，带着几百个A级Bug苟延残喘，最终整体整整延期**4周**才勉强发布上线。

**瀑布的双刃剑：**
- ✅ 无与伦比的**秩序感**、极其清晰的职责边界（产品/架构/开发/测试各司其职）。
- ❌ **致命弱点**：巨船难调头！越到中后期，需求变更的重修代价呈现指数级暴涨。而且大半段时间里，金主爸爸什么实物都看不到。

---

## 第二讲：化解危机——大瀑布之下的七十二变

为了不被漫长的僵硬周期拖死，软件先驱们对瀑布进行了一系列外科手术级的分尸和爆改。

### 1. 快速开发快速改：原型开发模型

**为了解决的最大痛点**：客户只知道要造轮子，但不知道轮子究竟长啥样。

- **操作**：用类似于Axure这种界面绘制工具，先“糊”一个完全没有灵魂后台的“皮毛纸板房”（UI点击流）。
- **实战**：让客户自己点击这个花架子玩耍，一边玩一边抠出它的真实需求。等需求彻底敲死了，再真正让后台写代码。
- **代价**：低成本、牺牲底层质量（有时候为了极速应对，底层代码其实是一团被抛弃的乱麻）。

### 2. 肢解大象：大瀑布拆成小瀑布

为了将以半年起步的回笼周期缩短到几周，诞生了两大家族：

**流派A：增量模型（按功能模块横切）**
- **套路**：不一次性打包交付。先交付一个“核心登录与支付模块”，打平现金流。一个月后再交付“评论与商城模块”。
- **造房比喻**：先盖主卧和卫生间，住进去再说。第二年赚钱了再盖偏房别墅区。
- **前提要求**：极度考验架构师对各大**模块之间的独立解耦**抽象能力。

![增量模型图示](../../assets/20d7896e4a52e8043defff6eedb9869b.jpg)

**流派B：迭代模型（按时间纵向演进）**
- **套路**：每次都给全套系统，但只是一个“糙版本”。比如第一个月给全域所有的基础骨架；第二个月给所有的模块全部铺上瓷砖美化代码；第三个月加上抗压组件。

![迭代模型图示](../../assets/97a05f1bba8344f5d9e8b8734a025e70.png)

> **核心差异：** 增量模型是“每次多增加一块完美独立房间”；迭代模型是“每次把这栋烂尾楼全局刷一遍漆直到完美”。

---

## 第三讲：真实战场指挥官——我该套用哪种兵书？

你不要死背概念词汇。进入商战，看菜下碟才是王道：

- **场景 01：极其严苛的涉军/政外包项目**
  - **兵书：V 模型**。
  - **打法**：它是瀑布的异化。每走过一个研发层级，哪怕是写需求文档，都有一波专业测试人员用对应的黑盒去强硬验收审查！安全就是命。
  ![V模型图示](../../assets/c015252d6ae984b667499ee5b8c76ab1.jpg)

- **场景 02：暴雷区试水，客户随时可能断贷跑路**
  - **兵书：螺旋模型**。
  - **打法**：极度病态地强调风险控制。每做一个小闭环交付，先停手由专门的风控财务团队做“风险评估审计”，如果下一期资金断裂立马砍掉止损。
  ![螺旋模型图示](../../assets/5c1f2444754f3ce5ce68e0a790da2bcc.png)

- **场景 03：去直接山寨一款现象级爆款竞品**
  - **兵书：增量模型**。
  - **打法**：根本不用调研需求，照抄就完事了！火速把对方系统按独立小模块劈开，三个组并行开发核心打法，做完模块A直接抢先推向市场卡位！

- **场景 04：超级大厂单子，预算极高但甲方根本不知道自己要啥**
  - **兵书：RUP（统一软件开发过程体系）**。
  - **打法**：大炮打蚊子式的高级服务。先用**初始期**勾勒大屏边界；投入巨大人力用原型模型做**细化期**死锁需求边界；进入**构造期**疯狂迭代打磨代码；最后转入极其重兵把守的**交付服化期**。
  ![RUP模型图示](../../assets/b0091341a7fa31cd26d8a02e7d63e2fc.png)

---

## 阶段作业与思考

📋 **第一周课后推演：场景辨析与沙盘论剑**

假设你正在大四期间，拿到了三个校外私活外包项目，你需要指定各自的过程打法，并写明决定理由：
1. **项目 A**：帮学校某核心实验室开发一套重大的基因测序记录管控系统，不允许出现一点偏差，一旦验收失败将被退学。
2. **项目 B**：帮隔壁美术系师妹紧急上线一个“校园高颜值闲置交易微信小程序”，她连草图都没画清，只是口头咋呼很急。
3. **项目 C**：某商业老板给 100 万预算做个“AI文案生成站”，但要求分四期拨款，对方疑心重重，第一期如果看不到成效马上撤资。
